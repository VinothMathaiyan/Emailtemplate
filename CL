<div class="date-container">
    <input type="text" id="day" maxlength="2" size="2" placeholder="DD"> -
    <input type="text" id="month" maxlength="2" size="2" placeholder="MM"> -
    <input type="text" id="year" maxlength="4" size="4" placeholder="YYYY">
    <div id="duetPickerContainer"></div> <!-- Placeholder for date picker -->
</div>
Qualtrics.SurveyEngine.addOnload(function() {
    let dayInput = document.getElementById("day");
    let monthInput = document.getElementById("month");
    let yearInput = document.getElementById("year");
    let pickerContainer = document.getElementById("duetPickerContainer");

    // Dynamically add Duet Date Picker (so Qualtrics doesn't remove it)
    let duetPicker = document.createElement("duet-date-picker");
    duetPicker.setAttribute("id", "duetDatePicker");
    duetPicker.setAttribute("locale", "en-GB");
    duetPicker.setAttribute("date-format", "dd-MM-yyyy");
    duetPicker.setAttribute("value", "");

    // Append the date picker inside the container
    pickerContainer.appendChild(duetPicker);

    function storeDateComponents() {
        let day = dayInput.value.trim();
        let month = monthInput.value.trim();
        let year = yearInput.value.trim();

        if (day && month && year) {
            Qualtrics.SurveyEngine.setEmbeddedData("StartDate", day);
            Qualtrics.SurveyEngine.setEmbeddedData("StartMonth", month);
            Qualtrics.SurveyEngine.setEmbeddedData("StartYear", year);
            console.log("ðŸ“Œ Stored in Qualtrics:", { day, month, year });
        }
    }

    // Capture selected date
    duetPicker.addEventListener("duetChange", function(event) {
        if (event.detail.value) {
            let [day, month, year] = event.detail.value.split("-");
            dayInput.value = day;
            monthInput.value = month;
            yearInput.value = year;
            storeDateComponents();
        }
    });

    // Update Embedded Data when users manually type the date
    dayInput.addEventListener("input", storeDateComponents);
    monthInput.addEventListener("input", storeDateComponents);
    yearInput.addEventListener("input", storeDateComponents);
});
