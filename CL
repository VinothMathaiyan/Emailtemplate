from wordcloud import WordCloud
import matplotlib.pyplot as plt

# Function to generate word clouds for each topic and actor
def generate_word_clouds_by_topic_actor(df):
    grouped = df.groupby(['Topics', 'Actor'])
    
    for (topic, actor), group in grouped:
        unique_words = [word for words in group['Top_Words'] for word in words]
        wordcloud_text = " ".join(unique_words)
        wordcloud = WordCloud(width=800, height=400, background_color='white').generate(wordcloud_text)
        
        plt.figure(figsize=(10, 8))
        plt.imshow(wordcloud, interpolation='bilinear')
        plt.title(f'Word Cloud for {topic} and {actor}')
        plt.axis('off')
        plt.show()

# Generate word clouds by topic and actor
generate_word_clouds_by_topic_actor(df)


from collections import Counter
import seaborn as sns

# Function to generate bar plots for each topic and actor
def generate_bar_plots_by_topic_actor(df):
    grouped = df.groupby(['Topics', 'Actor'])
    
    for (topic, actor), group in grouped:
        unique_words = [word for words in group['Top_Words'] for word in words]
        word_counts = Counter(unique_words)
        word_counts_df = pd.DataFrame.from_dict(word_counts, orient='index', columns=['Count']).reset_index()
        word_counts_df = word_counts_df.rename(columns={'index': 'Word'})
        
        plt.figure(figsize=(12, 6))
        sns.barplot(x='Count', y='Word', data=word_counts_df, palette='viridis')
        plt.title(f'Top Words for {topic} and {actor}')
        plt.xlabel('Frequency')
        plt.ylabel('Words')
        plt.show()

# Generate bar plots by topic and actor
generate_bar_plots_by_topic_actor(df)
