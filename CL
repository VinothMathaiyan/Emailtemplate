<script>
  Qualtrics.SurveyEngine.addOnload(function() {
    // Create the date picker element
    var datePicker = document.createElement('duet-date-picker');
    datePicker.setAttribute('name', 'date');
    datePicker.setAttribute('language', 'en');
    datePicker.setAttribute('label', 'Choose a date');
    datePicker.setAttribute('placeholder', 'dd.mm.yyyy');
    datePicker.setAttribute('value', '2020-06-16');

    // Append the date picker to the div
    document.getElementById('duet-date-picker').appendChild(datePicker);

    // Listen for when date is selected
    datePicker.addEventListener('duetChange', function (e) {
      console.log('selected date', e.detail.valueAsDate);
    });

    // Ensure Enter key expands the month or year in the popup calendar
    datePicker.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') {
        const activeElement = document.activeElement;
        if (activeElement && activeElement.classList.contains('duet-date__toggle')) {
          activeElement.click();
        }
      }
    });
  });
</script>
