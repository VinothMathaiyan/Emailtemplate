Qualtrics.SurveyEngine.addOnload(function() {
    var questionId = this.questionId;
    var inputId = '#' + questionId + ' .InputText';

    var container = document.createElement('div');
    container.innerHTML = '<duet-date-picker identifier="my-date-picker" value=""></duet-date-picker>';
    document.querySelector(inputId).parentNode.appendChild(container);

    document.querySelector(inputId).style.display = 'none';

    var datePicker = container.querySelector('duet-date-picker');

    datePicker.addEventListener('duetChange', function(event) {
        document.querySelector(inputId).value = event.detail.value;
    });

    // Handle Enter key press to open the date picker
    document.querySelector(inputId).parentNode.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
            event.preventDefault();
            datePicker.focus();
        }
    });
});
