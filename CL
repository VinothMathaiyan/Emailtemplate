from wordcloud import WordCloud
import matplotlib.pyplot as plt

# Function to generate and save word clouds for each topic and actor
def generate_and_save_word_clouds_by_topic_actor(df):
    grouped = df.groupby(['Topics', 'Actor'])
    
    for (topic, actor), group in grouped:
        unique_words = [word for words in group['Top_Words'] for word in words]
        wordcloud_text = " ".join(unique_words)
        wordcloud = WordCloud(width=800, height=400, background_color='white').generate(wordcloud_text)
        
        plt.figure(figsize=(10, 8))
        plt.imshow(wordcloud, interpolation='bilinear')
        plt.title(f'Word Cloud for {topic} and {actor}')
        plt.axis('off')
        plt.savefig(f'wordcloud_{topic}_{actor}.png')
        plt.show()

# Generate and save word clouds by topic and actor
generate_and_save_word_clouds_by_topic_actor(df)
